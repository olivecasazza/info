export NIXPKGS_ALLOW_UNFREE=1

# Use nix-direnv for cached flake environments (instant shell after first build)
# Falls back to standard direnv if nix-direnv not installed
if has nix_direnv_version; then
  nix_direnv_version 3.0.0
  use_flake
else
  use flake
fi

# Claude Code GCP Vertex AI Configuration
# Copy .env.local.example to .env.local and customize with your values
if [ -f .env.local ]; then
  set -a
  source .env.local
  set +a
  export GOOGLE_APPLICATION_CREDENTIALS_JSON="$(gcloud auth print-access-token --account=$DEVELOPER_EMAIL 2>/dev/null || echo '')"
fi
